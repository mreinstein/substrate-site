(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{360:function(t,e,s){t.exports=s.p+"assets/img/views-1.ad908ae5.png"},361:function(t,e,s){t.exports=s.p+"assets/img/views-2.5effdf3e.png"},362:function(t,e,s){t.exports=s.p+"assets/img/views-3.9f8e11ae.png"},363:function(t,e,s){t.exports=s.p+"assets/img/views-4.bc8a108e.png"},364:function(t,e,s){t.exports=s.p+"assets/img/views-5.8ba20fe6.png"},365:function(t,e,s){t.exports=s.p+"assets/img/views-7.9431aa51.png"},366:function(t,e,s){t.exports=s.p+"assets/img/views-8.32c548f7.png"},383:function(t,e,s){"use strict";s.r(e);var a=s(45),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"interactive-views"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#interactive-views"}},[t._v("#")]),t._v(" Interactive views")]),t._v(" "),a("p",[t._v("This tutorial will guide you through adding interactive HTML views to Substrate documents. These views are quite handy to display live, visual examples of the code contained in a document and/or imported from others.")]),t._v(" "),a("p",[t._v("We'll also cover some notions of code architecture that are not necessarily Substrate-specific. Bear in mind that the approaches presented here, though well suited for leveraging Substrate's features, are just a few of the many possible.")]),t._v(" "),a("h2",{attrs:{id:"create-an-explorable-block"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-an-explorable-block"}},[t._v("#")]),t._v(" Create an explorable block")]),t._v(" "),a("p",[t._v("Create a folder for this project, "),a("code",[t._v("interactive-views")]),t._v(".")]),t._v(" "),a("p",[t._v("Inside of it, create a new Substrate document, "),a("code",[t._v("index.explorable.md")]),t._v(", with the following content :")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" Interactive views")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js explorable")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I am a JavaScript explorable block. My code is hidden by default and only executes in this document!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("p",[t._v("This defines a "),a("strong",[a("em",[t._v("JavaScript explorable")])]),t._v(" block.")]),t._v(" "),a("p",[t._v("If you take a look at this document in the viewer, you will notice that the block's code is hidden by default, as a collapsible. That's one distinctive feature of explorable blocks. Nevertheless, "),a("code",[t._v('"I am a Javascript explorable block...')]),t._v(" is logged to the console, meaning the code executes.")]),t._v(" "),a("p",[t._v("However, if you try importing "),a("code",[t._v("index.explorable.md")]),t._v(" in another document, and view that document, you won't see anything logging to the console. That's because the code contained in explorable blocks is "),a("em",[t._v("excluded")]),t._v(" from a document's output - it will only ever execute when viewing that particular document.")]),t._v(" "),a("p",[a("strong",[t._v("This makes explorable blocks perfectly suited for code examples that should have no incidence outside of a document.")])]),t._v(" "),a("p",[t._v("That's great, but how will the result of these examples show up, besides console logs and shabby "),a("code",[t._v("alert()")]),t._v(" pop-ups?")]),t._v(" "),a("p",[t._v("Enter the third distinctive feature of explorable blocks, and not the least: HTML views. Indeed, these blocks can contain a definition for an arbitrary HTML structure that will get rendered right above them. It is then possible to factor JavaScript code and user input into these views.")]),t._v(" "),a("p",[t._v("Let's try it, shall we?")]),t._v(" "),a("h2",{attrs:{id:"add-an-html-view"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-an-html-view"}},[t._v("#")]),t._v(" Add an HTML view")]),t._v(" "),a("p",[t._v("Edit "),a("code",[t._v("index.explorable.md")]),t._v(" like so:")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" Interactive views")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js explorable")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[t._v("html"),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<div>\n    <h3>hello</h3>\n</div>")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Imports")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" html "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://cdn.skypack.dev/snabby'")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("p",[t._v("Two things happen here:")]),t._v(" "),a("ul",[a("li",[a("strong",[a("code",[t._v("import html from 'https://cdn.skypack.dev/snabby'")])]),t._v("\nimports an external dependency, "),a("a",{attrs:{href:"https://www.skypack.dev/view/snabby",target:"_blank",rel:"noopener noreferrer"}},[t._v("Snabby"),a("OutboundLink")],1),t._v("**, through "),a("a",{attrs:{href:"https://www.skypack.dev/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Skypack"),a("OutboundLink")],1),t._v(". Snabby is required to define HTML views in Substrate documents.")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("html`...`")])]),t._v(" invokes Snabby's tag function to create a "),a("a",{attrs:{href:"https://www.skypack.dev/view/snabbdom",target:"_blank",rel:"noopener noreferrer"}},[t._v("Snabbdom"),a("OutboundLink")],1),t._v(" virtual node as a template string. Because this is the last statement in the block, Substrate will insert an HTML view with this content in the viewer, just above the block's code.")])]),t._v(" "),a("p",[a("strong",[t._v("Snabby "),a("em",[t._v("has")]),t._v(" to be imported as "),a("code",[t._v("html")]),t._v(" for views to be inserted.")]),t._v(" The "),a("code",[t._v("html")]),t._v(" call also has to sit at the very end of an explorable block.")]),t._v(" "),a("p",[t._v("Furthermore, it's worth noting that "),a("strong",[t._v("explorable blocks with a view")]),t._v(" (ending with "),a("code",[t._v("`html...`")]),t._v(") "),a("strong",[t._v("can't contain import statements.")]),t._v(" When that happens, an error is thrown and neither the view nor the imports work.")]),t._v(" "),a("p",[t._v("In the viewer, "),a("strong",[t._v("'hello'")]),t._v(" should show up.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(360),alt:"An image"}})]),t._v(" "),a("p",[t._v("That's our view - arbitrary HTML rendered directly in our document's visualization!")]),t._v(" "),a("h2",{attrs:{id:"make-it-interactive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#make-it-interactive"}},[t._v("#")]),t._v(" Make it interactive")]),t._v(" "),a("p",[t._v("Now let's infuse some interactivity into this view. Wouldn't it be great if a button changed the displayed text when clicked? Yes, yes it would.")]),t._v(" "),a("p",[t._v("In "),a("code",[t._v("index.explorable.md")]),t._v(", add a JavaScript block with the following content:")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" buttonCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("incrementButtonCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    buttonCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("p",[a("strong",[a("code",[t._v("buttonCount")])]),t._v(" will hold the number of times a button has been clicked, and "),a("strong",[a("code",[t._v("incrementButtonCount()")])]),t._v(" will increment "),a("code",[t._v("buttonCount")]),t._v(" when called.")]),t._v(" "),a("p",[t._v("Then, edit the view's template string like so:")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js explorable")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[t._v("html"),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<div>\n    <h3>woah, the button's been clicked ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("buttonCount"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(" times</h3>\n    <button @on:click=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("incrementButtonCount"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(">click me!</button>\n</div>")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[a("code",[t._v("${buttonCount}")])]),t._v(" embeds the value of "),a("code",[t._v("buttonCount")]),t._v(" in our "),a("code",[t._v("<h3>")]),t._v("'s displayed text content.")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("<button...>")])]),t._v(" is a button element added to the view.")]),t._v(" "),a("li",[a("strong",[a("code",[t._v("@on:click=${incrementButtonCount}")])]),t._v(" is a Snabby "),a("em",[t._v("directive")]),t._v(". It interacts with Snabbdom's "),a("strong",[t._v("eventListeners")]),t._v(" module to have "),a("code",[t._v("incrementButtonCount()")]),t._v(" called whenever this button is clicked. Like "),a("code",[t._v("buttonCount")]),t._v(", "),a("code",[t._v("incrementButtonCount")]),t._v(" is embedded into the template string by wrapping it in "),a("code",[t._v("${...}")]),t._v(".")])]),t._v(" "),a("p",[t._v("This template string isn't directly appended to the DOM. Instead, it's a template for a "),a("em",[t._v("virtual node")]),t._v(" (or "),a("em",[t._v("vnode")]),t._v(") - sort of a model for a desired DOM state that is initially used to insert corresponding elements in the DOM. When some change occurs in that model, the new version is compared with the previous one to update the DOM efficiently.")]),t._v(" "),a("p",[t._v("When updating our view, Snabby will recalculate the model from the template, factoring in the current value of everything embedded with "),a("code",[t._v("${...}")]),t._v(".")]),t._v(" "),a("p",[t._v("So, changing the value of "),a("code",[t._v("buttonCount")]),t._v(" will suffice to change our "),a("code",[t._v("<h3>")]),t._v("'s displayed content. Will it?")]),t._v(" "),a("h4",{attrs:{id:"refreshing-the-view"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#refreshing-the-view"}},[t._v("#")]),t._v(" Refreshing the view")]),t._v(" "),a("p",[t._v("There's actually just one thing missing. We need to tell the view to refresh after "),a("code",[t._v("buttonCount")]),t._v(" changes.")]),t._v(" "),a("p",[t._v("To achieve this, simply add "),a("code",[t._v("update()")]),t._v(" at the end of "),a("code",[t._v("incrementButtonCount")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("incrementButtonCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    buttonCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("update()")]),t._v(" is a global function defined by Substrate that calls Snabby's own "),a("code",[t._v("update()")]),t._v(" function to update the DOM in all views.")]),t._v(" "),a("p",[a("strong",[t._v("It's important to consider that "),a("code",[t._v("update()")]),t._v(" also causes the JavaScript code in the views' block to re-execute.")]),t._v(" If we had defined "),a("code",[t._v("buttonCount")]),t._v(" and "),a("code",[t._v("incrementButtonCount()")]),t._v(" in the same block as our view, "),a("code",[t._v("buttonCount")]),t._v(" would have reset to 0 on every refresh, and "),a("code",[t._v("incrementButtonCount()")]),t._v(" would have been uselessly recreated over and over again.")]),t._v(" "),a("p",[t._v("Hopefully, we didn't do that. Phew!")]),t._v(" "),a("p",[a("img",{attrs:{src:s(361),alt:"An image"}})]),t._v(" "),a("h2",{attrs:{id:"style-it-with-css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#style-it-with-css"}},[t._v("#")]),t._v(" Style it with CSS")]),t._v(" "),a("p",[t._v("Let's make this view more interesting.")]),t._v(" "),a("p",[t._v("In the project's folder, create a new CSS file, "),a("code",[t._v("styles.css")]),t._v(".")]),t._v(" "),a("p",[t._v("Add some content to it:")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 20px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-radius")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("linear-gradient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("160deg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rgb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("86 160 255"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 0%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rgb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("21"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 139"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 100%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" white"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-radius")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rgb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("21"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 139"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" white"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1em"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" italic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("button:active")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rgb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("86 160 255"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rgb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("21"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 139"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Back to "),a("code",[t._v("index.explorable.md")]),t._v(", add this line to the first JavaScript block - the one containing the import statement for Snabby.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" css "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./styles.css'")]),t._v("\n")])])]),a("p",[t._v("Substrate turns "),a("code",[t._v("./styles.css")]),t._v(" into a JavaScript module that exports a string. (See "),a("a",{attrs:{href:"../guide/documents#styling-interactive-views"}},[t._v("styling interactive views")]),t._v(")")]),t._v(" "),a("p",[t._v("To apply the imported styles to the html view, add a "),a("code",[t._v("<style>")]),t._v(" tag in the view's "),a("code",[t._v("div")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js explorable")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[t._v("html"),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<div>\n    <style>")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("css"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("</style>\n    <h3>hello</h3>\n</div>")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:s(362),alt:"An image"}})]),t._v(" "),a("p",[t._v("That's better!")]),t._v(" "),a("h2",{attrs:{id:"insert-a-canvas-element"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#insert-a-canvas-element"}},[t._v("#")]),t._v(" Insert a canvas element")]),t._v(" "),a("p",[t._v("While it's awesome to be able to embed a DOM structure into a document and interact with it, some code is meant to ultimately draw things to the screen in more of a freestyle fashion - as is the case in most videogames, for example. That's what the canvas element is for.")]),t._v(" "),a("p",[t._v("It's as easy to add a canvas to a view as any other HTML element. But, in order to keep things nice and clean, let's have information for rendering to the canvas stored in a separate file. That will be useful later on.")]),t._v(" "),a("p",[t._v("In your project folder, create a subfolder, "),a("code",[t._v("lib")]),t._v(", where all local dependencies of "),a("code",[t._v("index.explorable.md")]),t._v(" will go.")]),t._v(" "),a("p",[t._v("Inside of "),a("code",[t._v("lib")]),t._v(", create "),a("code",[t._v("Renderer.explorable.md")]),t._v(" with the following content:")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Renderer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    height"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Renderer")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("p",[t._v("Back to "),a("code",[t._v("index.explorable.md")]),t._v(", add this explorable block below the existing one:")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js explorable")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[t._v("html"),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('<canvas width="')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\n    height="')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\n    style="background: linear-gradient(45deg, rgb(86 160 255) 0%, rgb(21, 64, 139) 100%)">\n</canvas>')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("p",[t._v("Of course, we could have styled the canvas with CSS instead of inlining it.")]),t._v(" "),a("p",[t._v("Finally, add the import statement for "),a("code",[t._v("Renderer")]),t._v(" alongside the other imports:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Renderer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib/Renderer.explorable.md'")]),t._v("\n")])])]),a("p",[t._v("There you go! The newer html view contains a blank canvas ready to be drawn onto:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(363),alt:"An image"}})]),t._v(" "),a("h2",{attrs:{id:"draw-to-the-canvas"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#draw-to-the-canvas"}},[t._v("#")]),t._v(" Draw to the canvas")]),t._v(" "),a("p",[t._v("First, we need to get a reference to its drawing context. This can be done handily by taking advantage of Snabbdom hooks.")]),t._v(" "),a("p",[t._v("Add "),a("code",[t._v("@hook:insert=${_insertHook}")]),t._v(" to the canvas-related html view, as an attribute:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("html"),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('<canvas width="')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\n    height="')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\n    @hook:insert=')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("_insertHook"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n    style="background: linear-gradient(45deg, rgb(86 160 255) 0%, rgb(21, 64, 139) 100%)">\n</canvas>')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),a("p",[a("code",[t._v("@hook:insert=${_insertHook}")]),t._v(" is another of Snabby's "),a("em",[t._v("directives")]),t._v(". It interacts with Snabbdom's "),a("strong",[t._v("hooks")]),t._v(" module to have "),a("code",[t._v("_insertHook()")]),t._v(" called when the canvas element corresponding to this virtual node is inserted into the DOM. A reference to the virtual node will be passed to "),a("code",[t._v("_insertHook()")]),t._v(".")]),t._v(" "),a("p",[t._v("From there, it's simple to grab a reference to the canvas element's drawing context through the vnode's "),a("code",[t._v("elm")]),t._v(" property. In the topmost JavaScript block, after "),a("code",[t._v("incrementButtonCount()")]),t._v(", add the definition for "),a("code",[t._v("_insertHook()")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_insertHook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("vnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2d'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#ffffff'")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fillRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("150")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("In addition to getting the drawing context, we use it immediately to draw a white rectangle.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(364),alt:"An image"}})]),t._v(" "),a("h2",{attrs:{id:"setup-an-animation-loop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup-an-animation-loop"}},[t._v("#")]),t._v(" Setup an animation loop")]),t._v(" "),a("p",[t._v("While drawing to the canvas can now be done anywhere in the code, a common approach is to implement a loop to update and redraw things every frame.")]),t._v(" "),a("p",[t._v("We won't be drawing to the canvas in "),a("code",[t._v("_insertHook()")]),t._v(" anymore. We'll also need our "),a("code",[t._v("Renderer")]),t._v(" object to hold a reference to the drawing context. Re-write "),a("code",[t._v("_insertHook")]),t._v(" like so:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_insertHook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("vnode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2d'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gameLoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("And just below it, add the definition for "),a("code",[t._v("gameLoop()")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("gameLoop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("elapsedMS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderScene")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elapsedMS"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gameLoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Called as a result of "),a("code",[t._v("requestAnimationFrame()")]),t._v(", "),a("code",[t._v("gameLoop()")]),t._v(" will be passed the webpage's elapsed time since loading.")]),t._v(" "),a("p",[t._v("That information will be passed to a local dependency, "),a("code",[t._v("renderScene()")]),t._v(", where the drawing action will happen. In the "),a("code",[t._v("lib")]),t._v(" subfolder, create "),a("code",[t._v("renderScene.explorable.md")]),t._v(" with the following content:")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderScene")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("elapsedSecs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#ffffff'")]),t._v("\n    Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fillRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// x ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elapsedSecs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// y")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("150")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("                                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// width, height")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Renderer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./Renderer.explorable.md'")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("p",[t._v("This function uses the elapsed time, as well as properties of "),a("code",[t._v("Renderer")]),t._v(" - conveniently imported here - to draw a moving rectangle to the canvas.")]),t._v(" "),a("p",[t._v("Don't forget to add the import statement for "),a("code",[t._v("renderScene")]),t._v(" in "),a("code",[t._v("index.explorable.md")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" renderScene "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib/renderScene.explorable.md'")]),t._v("\n")])])]),a("p",[t._v("That white rectangle should now be a moving one.")]),t._v(" "),a("h2",{attrs:{id:"influence-the-canvas"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#influence-the-canvas"}},[t._v("#")]),t._v(" Influence the canvas")]),t._v(" "),a("p",[t._v("Of course, what is rendered should often be affected by user input.")]),t._v(" "),a("p",[t._v("Let's have the button click count influence the drawn rectangle's position.")]),t._v(" "),a("p",[t._v("In "),a("code",[t._v("renderScene.explorable.md")]),t._v(", edit the call to "),a("code",[t._v("Renderer.ctx.fillRect()")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fillRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" buttonCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// x ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elapsedSecs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// y")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("150")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("                                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// width, height")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Does that work? No, it doesn't. An error is thrown because "),a("code",[t._v("buttonCount")]),t._v(" doesn't exist in the scope of this module. Oops!")]),t._v(" "),a("p",[t._v("A simple workaround would be to pass "),a("code",[t._v("buttonCount")]),t._v(" to "),a("code",[t._v("renderScene()")]),t._v(". That would do it nicely.")]),t._v(" "),a("p",[t._v("However, in a lot of cases, rendering depends on a vast amount of information, all of which can't always be passed to the rendering function. A more interesting approach, then, is to put information describing the application's state in a module (or modules) so it can be imported whenever required.")]),t._v(" "),a("p",[t._v("In the "),a("code",[t._v("lib")]),t._v(" subfolder, create a new document, "),a("code",[t._v("globals.explorable.md")]),t._v(", with the following content:")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    buttonCount"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Rect "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    height"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#ffbbff'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    amplitudeX"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    amplitudeY"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    speedX"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    speedY"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Renderer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    height"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ctx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("p",[t._v("Besides moving "),a("code",[t._v("buttonCount")]),t._v(" here, this also defines "),a("code",[t._v("Rect")]),t._v(", an object for configuring the moving white rectangle.")]),t._v(" "),a("p",[t._v("It also makes sense to move "),a("code",[t._v("Renderer")]),t._v(" here, instead of giving it its own file. You may now delete "),a("code",[t._v("Renderer.explorable.md")]),t._v(".")]),t._v(" "),a("p",[t._v("In "),a("code",[t._v("index.explorable.md")]),t._v(", change the import statement for "),a("code",[t._v("Renderer")]),t._v(" accordingly:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib/globals.explorable.md'")]),t._v("\n")])])]),a("p",[t._v("This imports both "),a("code",[t._v("Renderer")]),t._v(" and "),a("code",[t._v("state")]),t._v(" from "),a("code",[t._v("globals.explorable.md")]),t._v(", as named imports.")]),t._v(" "),a("p",[t._v("Replace both occurences of "),a("code",[t._v("buttonCount")]),t._v(" with "),a("code",[t._v("state.buttonCount")]),t._v(" in this document:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("incrementButtonCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("buttonCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("html"),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<div>\n    <style>")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("css"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("</style>\n    <h3>woah, the button's been clicked ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("buttonCount"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(" times</h3>\n    <button @on:click=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("incrementButtonCount"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(">click me!</button>\n</div>")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),a("p",[t._v("Finally, edit "),a("code",[t._v("renderScene.explorable.md")]),t._v(" like so:")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderScene")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("elapsedSecs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rectXInCenter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rectYInCenter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n\n    Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color\n    Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fillRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        rectXInCenter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("amplitudeX "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("buttonCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("speedX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// x ")]),t._v("\n        rectYInCenter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("amplitudeY "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elapsedSecs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("speedY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// y")]),t._v("\n        Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height                                                         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// width, height")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./globals.explorable.md'")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("p",[t._v("In addition to pointing correctly to imports and "),a("code",[t._v("buttonCount")]),t._v(", this function doesn't use hardcoded 'magic numbers' anymore to render the rectangle. Instead, it relies on properties of imported objects. This paves the way for more potential interactivity.")]),t._v(" "),a("p",[a("code",[t._v("state.buttonCount")]),t._v(" is factored into the x component of the rectangle's drawing position, which was our objective. And through "),a("code",[t._v("Rect")]),t._v("'s properties, we've changed the rectangle's color and size.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(365),alt:"An image"}})]),t._v(" "),a("p",[t._v("Because the views are updated efficiently - with the minimum required amount of disruption - our canvas element doesn't get re-created every time the button is clicked and "),a("code",[t._v("update()")]),t._v(" is called. Good thing!")]),t._v(" "),a("p",[t._v("We could also add event listeners to the canvas to detect clicks, mouse position, key presses, etc. Pretty much anything that can be done on a regular webpage can be done here.")]),t._v(" "),a("h2",{attrs:{id:"merge-the-views"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#merge-the-views"}},[t._v("#")]),t._v(" Merge the views")]),t._v(" "),a("p",[t._v("HTML views don't have to contain either a canvas element or some other DOM structure. Both will coexist harmoniously, "),a("strong",[a("em",[t._v("as long as there's exactly one top-level node containing the others")])]),t._v(".")]),t._v(" "),a("p",[t._v("In "),a("code",[t._v("index.explorable.md")]),t._v(", replace the two JavaScript explorable blocks with this one:")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token code"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")]),a("span",{pre:!0,attrs:{class:"token code-language"}},[t._v("js explorable")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token code-block language-js"}},[t._v("html"),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<div>\n    <style>")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("css"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('</style>\n    <canvas width="')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\n        height="')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\n        @hook:insert=')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("_insertHook"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n        style="background: linear-gradient(45deg, rgb(86 160 255) 0%, rgb(21, 64, 139) 100%)">\n    </canvas>\n    <h3>woah, the button\'s been clicked ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("buttonCount"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(" times</h3>\n    <button @on:click=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("incrementButtonCount"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(">click me!</button>\n</div>")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("```")])]),t._v("\n")])])]),a("p",[t._v("The result is what you'd expect:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(366),alt:"An image"}})])])}),[],!1,null,null,null);e.default=n.exports}}]);